"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleRoute=void 0;const validate_1=__importDefault(require("../middleware/validate")),getDbOperation_1=require("./getDbOperation");async function handleRoute(request,response){const{microservice:microservice,endpoint:endpoint,command:command}=request.params,{query:query,body:body}=request,newQuery=Object.assign(Object.assign({},query),body),validatedQuery=validate_1.default.query(newQuery);try{const dbOperation=(0,getDbOperation_1.getDbOperation)(microservice,endpoint,command),result=await dbOperation(validatedQuery);response.json(result)}catch(asyncError){await asyncError,response.status(404).json(asyncError.message)}}exports.handleRoute=handleRoute;