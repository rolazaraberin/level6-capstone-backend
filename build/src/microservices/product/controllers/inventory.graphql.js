"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const graphql_1=__importDefault(require("../models/graphql")),Item_1=require("../models/entities/Item"),inventory={getOne:getOne};async function getOne(query){var _a,_b,_c;const graphqlQuery='\n    query {\n      amazonProductCategory(input: {categoryId: "1084128"}) {\n        productResults {\n          results{\n            asin\n            title\n            mainImageUrl\n            price {\n              value\n            }\n          }\n        }\n      }\n    }',response=await graphql_1.default.send(graphqlQuery),productsArray=undefined,items=(null===(_c=null===(_b=null===(_a=null==response?void 0:response.data)||void 0===_a?void 0:_a.amazonProductCategory)||void 0===_b?void 0:_b.productResults)||void 0===_c?void 0:_c.results).map(toItem),item_ids=undefined,inventory=undefined;return{item_ids:items.map(toItemId),items:items}}function toItem(item){const _id=item.asin,{name:name,description:description}=extractInfo(item.title),price=item.price.value,image=item.mainImageUrl;return(0,Item_1.Item)({_id:_id,name:name,description:description,price:price,image:image})}function toItemId(item){const{_id:_id}=item;return _id}function extractInfo(info){const[name,..._otherInfo]=info.split(",");return{name:name,description:info}}exports.default=inventory;